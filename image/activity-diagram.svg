<svg viewBox="0 0 560 720" xmlns="http://www.w3.org/2000/svg" font-family="'Courier New', monospace">
  <defs>
    <marker id="arr" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0,10 3.5,0 7" fill="#334155"/>
    </marker>
    <marker id="arr-red" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0,10 3.5,0 7" fill="#ef4444"/>
    </marker>
    <marker id="arr-grn" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0,10 3.5,0 7" fill="#16a34a"/>
    </marker>
    <marker id="arr-amb" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0,10 3.5,0 7" fill="#d97706"/>
    </marker>
    <filter id="sh">
      <feDropShadow dx="1" dy="2" stdDeviation="2.5" flood-color="#00000020"/>
    </filter>
  </defs>

  <rect width="560" height="720" fill="#f8fafc"/>

  <!-- â”€â”€ UML Frame â”€â”€ -->
  <rect x="8" y="8" width="544" height="704" rx="0" fill="#fafafa" stroke="#334155" stroke-width="2"/>
  <polygon points="8,8 188,8 204,26 8,26" fill="#1e293b"/>
  <text x="16" y="21" font-size="9" font-weight="bold" fill="#fff" letter-spacing="0.5">ad</text>
  <text x="34" y="21" font-size="9" fill="#94a3b8">  Request Processing â€” Activity Diagram</text>

  <!-- â”€â”€ UML Initial node (filled circle) â”€â”€ -->
  <circle cx="280" cy="52" r="12" fill="#0f172a"/>
  <text x="310" y="56" font-size="9" font-style="italic" fill="#64748b">Â«initial nodeÂ»</text>

  <!-- arrow initial â†’ swimlane entry -->
  <line x1="280" y1="64" x2="280" y2="82" stroke="#334155" stroke-width="1.8" marker-end="url(#arr)"/>

  <!-- Request label -->
  <rect x="220" y="68" width="120" height="16" rx="8" fill="#e2e8f0" stroke="#cbd5e1" stroke-width="1"/>
  <text x="280" y="80" text-anchor="middle" font-size="9" fill="#475569">HTTP Request</text>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SWIMLANE 1 â€” PRESENTATION
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <rect x="20" y="90" width="520" height="170" rx="4" fill="#f0f9ff" stroke="#7dd3fc" stroke-width="1.3" stroke-dasharray="7 3"/>
  <text x="28" y="104" font-size="8" font-weight="bold" fill="#0369a1" letter-spacing="1">Â«swimlaneÂ»  PRESENTATION LAYER</text>

  <!-- Action: Input Validation -->
  <rect x="170" y="108" width="220" height="80" rx="6" fill="#fff" stroke="#38bdf8" stroke-width="2" filter="url(#sh)"/>
  <rect x="170" y="108" width="220" height="22" rx="6" fill="#0284c7"/>
  <rect x="170" y="120" width="220" height="10" fill="#0284c7"/>
  <text x="280" y="123" text-anchor="middle" font-size="10" font-weight="bold" fill="#fff">Input Validation</text>
  <!-- rounded corners on action = UML activity action notation -->
  <text x="182" y="142" font-size="9" fill="#475569">â€¢ name / email not empty</text>
  <text x="182" y="155" font-size="9" fill="#475569">â€¢ capacity, quantity &gt; 0</text>
  <text x="182" y="168" font-size="9" fill="#475569">â€¢ event_id &gt; 0  Â·  type checks</text>

  <!-- arrow â†’ decision -->
  <line x1="280" y1="188" x2="280" y2="218" stroke="#334155" stroke-width="1.8" marker-end="url(#arr)"/>

  <!-- â”€â”€ Decision: Valid? â”€â”€ (diamond = UML decision node) -->
  <polygon points="280,220 322,248 280,276 238,248" fill="#fef9c3" stroke="#d97706" stroke-width="2" filter="url(#sh)"/>
  <text x="280" y="244" text-anchor="middle" font-size="10" font-weight="bold" fill="#0f172a">Valid?</text>
  <text x="280" y="258" text-anchor="middle" font-size="8" font-style="italic" fill="#92400e">Â«decisionÂ»</text>

  <!-- [No] branch LEFT â†’ 400 -->
  <line x1="238" y1="248" x2="90" y2="248" stroke="#ef4444" stroke-width="1.8" marker-end="url(#arr-red)"/>
  <line x1="90" y1="248" x2="90" y2="570" stroke="#ef4444" stroke-width="1.8"/>
  <line x1="90" y1="570" x2="130" y2="570" stroke="#ef4444" stroke-width="1.8" marker-end="url(#arr-red)"/>
  <rect x="190" y="236" width="38" height="16" rx="8" fill="#fee2e2" stroke="#fca5a5" stroke-width="1"/>
  <text x="209" y="248" text-anchor="middle" font-size="9" font-weight="bold" fill="#ef4444">[No]</text>

  <!-- [Yes] branch DOWN -->
  <line x1="280" y1="276" x2="280" y2="306" stroke="#16a34a" stroke-width="1.8" marker-end="url(#arr-grn)"/>
  <rect x="244" y="276" width="40" height="16" rx="8" fill="#dcfce7" stroke="#86efac" stroke-width="1"/>
  <text x="264" y="288" text-anchor="middle" font-size="9" font-weight="bold" fill="#16a34a">[Yes]</text>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SWIMLANE 2 â€” BUSINESS LOGIC
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <rect x="20" y="300" width="520" height="170" rx="4" fill="#fffbeb" stroke="#fcd34d" stroke-width="1.3" stroke-dasharray="7 3"/>
  <text x="28" y="314" font-size="8" font-weight="bold" fill="#b45309" letter-spacing="1">Â«swimlaneÂ»  BUSINESS LOGIC LAYER</text>

  <!-- Action: Business Logic -->
  <rect x="170" y="318" width="220" height="80" rx="6" fill="#fff" stroke="#f59e0b" stroke-width="2" filter="url(#sh)"/>
  <rect x="170" y="318" width="220" height="22" rx="6" fill="#d97706"/>
  <rect x="170" y="330" width="220" height="10" fill="#d97706"/>
  <text x="280" y="333" text-anchor="middle" font-size="10" font-weight="bold" fill="#fff">Business Logic</text>
  <text x="182" y="352" font-size="9" fill="#475569">ðŸ”’ Lock Mutex</text>
  <text x="182" y="365" font-size="9" fill="#475569">â€¢ Check availability  (SELECT)</text>
  <text x="182" y="378" font-size="9" fill="#475569">â€¢ UPDATE + INSERT  Â·  COMMIT</text>

  <!-- arrow â†’ decision -->
  <line x1="280" y1="398" x2="280" y2="428" stroke="#334155" stroke-width="1.8" marker-end="url(#arr)"/>

  <!-- â”€â”€ Decision: Success? â”€â”€ -->
  <polygon points="280,430 322,458 280,486 238,458" fill="#fef9c3" stroke="#d97706" stroke-width="2" filter="url(#sh)"/>
  <text x="280" y="454" text-anchor="middle" font-size="10" font-weight="bold" fill="#0f172a">Success?</text>
  <text x="280" y="468" text-anchor="middle" font-size="8" font-style="italic" fill="#92400e">Â«decisionÂ»</text>

  <!-- [No] â†’ 409 (conflict branch) -->
  <line x1="238" y1="458" x2="188" y2="458" stroke="#d97706" stroke-width="1.8" marker-end="url(#arr-amb)"/>
  <line x1="188" y1="458" x2="188" y2="570" stroke="#d97706" stroke-width="1.8" marker-end="url(#arr-amb)"/>
  <rect x="195" y="446" width="38" height="16" rx="8" fill="#fef3c7" stroke="#fbbf24" stroke-width="1"/>
  <text x="214" y="458" text-anchor="middle" font-size="9" font-weight="bold" fill="#d97706">[No]</text>

  <!-- [Yes] branch DOWN -->
  <line x1="280" y1="486" x2="280" y2="510" stroke="#16a34a" stroke-width="1.8"/>
  <line x1="280" y1="510" x2="420" y2="510" stroke="#16a34a" stroke-width="1.8"/>
  <line x1="420" y1="510" x2="420" y2="570" stroke="#16a34a" stroke-width="1.8" marker-end="url(#arr-grn)"/>
  <rect x="284" y="488" width="40" height="16" rx="8" fill="#dcfce7" stroke="#86efac" stroke-width="1"/>
  <text x="304" y="500" text-anchor="middle" font-size="9" font-weight="bold" fill="#16a34a">[Yes]</text>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SWIMLANE 3 â€” RESPONSES
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <rect x="20" y="540" width="520" height="116" rx="4" fill="#f0fdf4" stroke="#86efac" stroke-width="1.3" stroke-dasharray="7 3"/>
  <text x="28" y="554" font-size="8" font-weight="bold" fill="#15803d" letter-spacing="1">Â«swimlaneÂ»  PRESENTATION LAYER â€” Response</text>

  <!-- 400 Bad Request -->
  <rect x="30" y="562" width="138" height="72" rx="6" fill="#fff" stroke="#ef4444" stroke-width="2" filter="url(#sh)"/>
  <rect x="30" y="562" width="138" height="22" rx="6" fill="#ef4444"/>
  <rect x="30" y="574" width="138" height="10" fill="#ef4444"/>
  <text x="99" y="577" text-anchor="middle" font-size="10" font-weight="bold" fill="#fff">400</text>
  <text x="99" y="588" text-anchor="middle" font-size="8" fill="#fecaca">Bad Request</text>
  <text x="42" y="602" font-size="8" fill="#475569">{ success: false,</text>
  <text x="42" y="614" font-size="8" fill="#475569">  errors: [...]  }</text>
  <text x="42" y="626" font-size="8" fill="#475569">  Validation failed</text>

  <!-- 409 Conflict -->
  <rect x="211" y="562" width="138" height="72" rx="6" fill="#fff" stroke="#d97706" stroke-width="2" filter="url(#sh)"/>
  <rect x="211" y="562" width="138" height="22" rx="6" fill="#d97706"/>
  <rect x="211" y="574" width="138" height="10" fill="#d97706"/>
  <text x="280" y="577" text-anchor="middle" font-size="10" font-weight="bold" fill="#fff">409</text>
  <text x="280" y="588" text-anchor="middle" font-size="8" fill="#fef3c7">Conflict</text>
  <text x="223" y="602" font-size="8" fill="#475569">{ success: false,</text>
  <text x="223" y="614" font-size="8" fill="#475569">  message:</text>
  <text x="223" y="626" font-size="8" fill="#475569">  "Not enough seats"}</text>

  <!-- 201 Created -->
  <rect x="392" y="562" width="138" height="72" rx="6" fill="#fff" stroke="#16a34a" stroke-width="2" filter="url(#sh)"/>
  <rect x="392" y="562" width="138" height="22" rx="6" fill="#16a34a"/>
  <rect x="392" y="574" width="138" height="10" fill="#16a34a"/>
  <text x="461" y="577" text-anchor="middle" font-size="10" font-weight="bold" fill="#fff">201</text>
  <text x="461" y="588" text-anchor="middle" font-size="8" fill="#bbf7d0">Created</text>
  <text x="404" y="602" font-size="8" fill="#475569">{ success: true,</text>
  <text x="404" y="614" font-size="8" fill="#475569">  data: {</text>
  <text x="404" y="626" font-size="8" fill="#475569">    booking_id: ... }}</text>

  <!-- â”€â”€ UML Final nodes (circle in circle) â”€â”€ -->
  <!-- under 400 -->
  <line x1="99"  y1="634" x2="99"  y2="660" stroke="#ef4444" stroke-width="1.6" marker-end="url(#arr-red)"/>
  <circle cx="99"  cy="672" r="10" fill="none" stroke="#334155" stroke-width="2"/>
  <circle cx="99"  cy="672" r="6"  fill="#0f172a"/>

  <!-- under 409 -->
  <line x1="280" y1="634" x2="280" y2="660" stroke="#d97706" stroke-width="1.6" marker-end="url(#arr-amb)"/>
  <circle cx="280" cy="672" r="10" fill="none" stroke="#334155" stroke-width="2"/>
  <circle cx="280" cy="672" r="6"  fill="#0f172a"/>

  <!-- under 201 -->
  <line x1="461" y1="634" x2="461" y2="660" stroke="#16a34a" stroke-width="1.6" marker-end="url(#arr-grn)"/>
  <circle cx="461" cy="672" r="10" fill="none" stroke="#334155" stroke-width="2"/>
  <circle cx="461" cy="672" r="6"  fill="#0f172a"/>

  <!-- Â«flow finalÂ» labels -->
  <text x="99"  y="692" text-anchor="middle" font-size="8" font-style="italic" fill="#94a3b8">Â«flow finalÂ»</text>
  <text x="280" y="692" text-anchor="middle" font-size="8" font-style="italic" fill="#94a3b8">Â«flow finalÂ»</text>
  <text x="461" y="692" text-anchor="middle" font-size="8" font-style="italic" fill="#94a3b8">Â«flow finalÂ»</text>

  <!-- â”€â”€ guard labels on branches â”€â”€ -->
  <!-- 400 entry arrow label -->
  <text x="56" y="244" font-size="8" fill="#ef4444" font-style="italic">invalid input</text>
  <!-- 409 entry arrow label -->
  <text x="112" y="452" font-size="8" fill="#d97706" font-style="italic">no seats</text>

</svg>
